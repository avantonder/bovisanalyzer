report_comment: >
  This report has been generated by the <a href="https://github.com/avantonder/bovisanalyzer" target="_blank">avantonder/bovisanalyzer</a>
  analysis pipeline. For information about how to interpret these results, please see the
  <a href="https://nf-co.re/bovisanalyzer" target="_blank">documentation</a>.

data_format: "yaml"

max_table_rows: 10000

run_modules:
  - custom_content
  - fastqc
  - fastp
  - kraken
  - samtools
  - bcftools

module_order:
  - fastqc:
      name: "PREPROCESS: FastQC (raw reads)"
      info: "This section of the report shows FastQC results for the raw reads before adapter trimming."
      path_filters:
        - "./fastqc/*.zip"
  - fastp:
      name: "PREPROCESS: fastp (adapter trimming)"
      info: "This section of the report shows fastp results for reads after adapter and quality trimming."
  - kraken:
      name: "PREPROCESS: Kraken 2"
      info: "This section of the report shows Kraken 2 classification results for reads after adapter trimming with fastp."
  - samtools:
        name: 'MAPPING: SAMTools (raw)'
        anchor: 'samtools'
        info: 'This section of the report shows SAMTools counts/statistics after mapping with BWA.'
        path_filters:
            - './samtools/*'
  - bcftools:
        name: 'VARIANTS: BCFTools (BCFTools)'
        anchor: 'bcftools'
        info: 'This section of the report shows BCFTools stats results for variants called by BCFTools.'
        path_filters:
            - './variants/*.txt'

report_section_order:
  summary_assembly_metrics:
    before: summary_variants_metrics
  software_versions:
    order: -1001
  "nf-core-bovisanalyzer-summary":
    order: -1002

export_plots: true

custom_data:
  summary_variants_metrics:
    section_name: "Variant calling metrics"
    description: "generated by the bovisanalyzer pipeline"
    plot_type: "table"
    headers:
      "# Input reads":
        description: "Total number of reads in raw fastq file"
        format: "{:,.0f}"
      "% Non-host reads (Kraken 2)":
        description: "Total number of non-host reads identified by Kraken2"
        format: "{:,.2f}"
      "# Trimmed reads (fastp)":
        description: "Total number of reads remaining after adapter/quality trimming with fastp"
        format: "{:,.0f}"
      "# Mapped reads":
        description: "Total number of BWA mapped reads relative to the viral genome"
        format: "{:,.0f}"
      "% Mapped reads":
        description: "Percentage of BWA mapped reads relative to the viral genome"
        format: "{:,.2f}"
    pconfig:
      id: "summary_variants_metrics_plot"
      table_title: "Variant calling metrics"
      namespace: "Variant calling metrics"
      only_defined_headers: False
      format: "{:.0f}"
  fail_mapped_reads:
    section_name: "WARNING: Fail Reads Check"
    description: "List of samples that had no reads after adapter trimming, and hence were ignored for the downstream processing steps."
    plot_type: "table"
    pconfig:
      id: "fail_mapped_reads_table"
      table_title: "Samples failed read threshold"
      namespace: "Samples failed read threshold"
      format: "{:,.0f}"
